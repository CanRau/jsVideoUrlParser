!function(){"use strict";function a(b){if(null===b||"object"!=typeof b)return b;var c=b.constructor();for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}function b(a){if("string"!=typeof a)return{};a=a.split("+").join(" ");var b,c={},d=a.match(/(?:[\?](?:[^=]+)=(?:[^&#]*)(?:[&](?:[^=]+)=(?:[^&#]*))*(?:[#].*)?)|(?:[#].*)/);if(null===d)return{};b=d[0].substr(1).split(/[&#=]/);for(var e=0;e<b.length;e+=2)c[decodeURIComponent(b[e])]=decodeURIComponent(b[e+1]||"");return c}function c(a){if("object"!=typeof a)return"";a.params=a.params||{};var b="",c=0,d=Object.keys(a.params);if(0===d.length)return"";for(d.sort(),a.hasParams||(b+="?"+d[0]+"="+a.params[d[0]],c+=1);c<d.length;c+=1)b+="&"+d[c]+"="+a.params[d[c]];return b}function d(a){var b,c=0,d={s:1,m:60,h:3600,d:86400,w:604800};if(!a.match(/^(\d+[smhdw]?)+$/))return 0;a=a.replace(/([smhdw])/g," $1 ").trim(),b=a.split(" ");for(var e=0;e<b.length;e+=2)c+=parseInt(b[e],10)*d[b[e+1]||"s"];return c}function e(){this.plugins={}}function f(){this.provider="canalplus",this.defaultFormat="embed",this.formats={embed:this.createEmbedUrl},this.mediaTypes={VIDEO:"video"}}function g(){this.provider="coub",this.defaultFormat="long",this.formats={"long":this.createLongUrl,embed:this.createEmbedUrl},this.mediaTypes={VIDEO:"video"}}function h(){this.provider="dailymotion",this.alternatives=["dai"],this.defaultFormat="long",this.formats={"short":this.createShortUrl,"long":this.createLongUrl,embed:this.createEmbedUrl},this.mediaTypes={VIDEO:"video"}}function i(){this.provider="facebook",this.alternatives=["fb"],this.defaultFormat="long",this.formats={"long":this.createLongUrl,"short":this.createShortUrl,longImage:this.createImageUrl},this.mediaTypes={VIDEO:"video"}}function j(){this.provider="twitch",this.defaultFormat="long",this.formats={"long":this.createLongUrl,embed:this.createEmbedUrl},this.mediaTypes={VIDEO:"video",STREAM:"stream",CLIP:"clip"}}function k(){this.provider="vimeo",this.alternatives=["vimeopro"],this.defaultFormat="long",this.formats={"long":this.createLongUrl,embed:this.createEmbedUrl},this.mediaTypes={VIDEO:"video"}}function l(){this.provider="youtube",this.alternatives=["youtu","ytimg"],this.defaultFormat="long",this.formats={"short":this.createShortUrl,"long":this.createLongUrl,embed:this.createEmbedUrl,shortImage:this.createShortImageUrl,longImage:this.createLongImageUrl},this.imageQualities={0:"0",1:"1",2:"2",3:"3",DEFAULT:"default",HQDEFAULT:"hqdefault",SDDEFAULT:"sddefault",MQDEFAULT:"mqdefault",MAXRESDEFAULT:"maxresdefault"},this.defaultImageQuality=this.imageQualities.HQDEFAULT,this.mediaTypes={VIDEO:"video",PLAYLIST:"playlist",SHARE:"share"}}function m(){this.provider="youku",this.defaultFormat="long",this.formats={embed:this.createEmbedUrl,"long":this.createLongUrl,flash:this.createFlashUrl,"static":this.createStaticUrl},this.mediaTypes={VIDEO:"video"}}e.prototype.parseProvider=function(a){var b=a.match(/(?:(?:https?:)?\/\/)?(?:[^\.]+\.)?(\w+)\./i);return b?b[1]:void 0},e.prototype.removeEmptyParameters=function(a){return a.params&&0===Object.keys(a.params).length&&delete a.params,a},e.prototype.parse=function(a){var c,d=this,e=d.parseProvider(a),f=d.plugins[e];return e&&f&&f.parse?(c=f.parse.apply(f,[a,b(a)]),c&&(c=d.removeEmptyParameters(c),c.provider=f.provider),c):void 0},e.prototype.bind=function(a){if(this.plugins[a.provider]=a,a.alternatives)for(var b=0;b<a.alternatives.length;b+=1)this.plugins[a.alternatives[b]]=a},e.prototype.create=function(b){var c=b.videoInfo,d=b.params,e=this.plugins[c.provider];return d="internal"===d?c.params:d||{},e&&(b.format=b.format||e.defaultFormat,e.formats.hasOwnProperty(b.format))?e.formats[b.format].apply(e,[c,a(d)]):void 0};var n=new e;f.prototype.parseParameters=function(a){return delete a.vid,a},f.prototype.parse=function(a,b){var c=this,d={mediaType:this.mediaTypes.VIDEO,id:b.vid};return d.params=c.parseParameters(b),d.id?d:void 0},f.prototype.createEmbedUrl=function(a,b){var d="http://player.canalplus.fr/embed/";return b.vid=a.id,d+=c({params:b})},n.bind(new f),g.prototype.parseUrl=function(a){var b=a.match(/(?:embed|view)\/([a-zA-Z\d]+)/i);return b?b[1]:void 0},g.prototype.parse=function(a,b){var c={mediaType:this.mediaTypes.VIDEO,params:b,id:this.parseUrl(a)};return c.id?c:void 0},g.prototype.createUrl=function(a,b,d){var e=a+b.id;return e+=c({params:d})},g.prototype.createLongUrl=function(a,b){return this.createUrl("https://coub.com/view/",a,b)},g.prototype.createEmbedUrl=function(a,b){return this.createUrl("//coub.com/embed/",a,b)},n.bind(new g),h.prototype.parseParameters=function(a){return this.parseTime(a)},h.prototype.parseTime=function(a){return a.start&&(a.start=d(a.start)),a},h.prototype.parseUrl=function(a){var b=a.match(/(?:\/video|ly)\/([A-Za-z0-9]+)/i);return b?b[1]:void 0},h.prototype.parse=function(a,b){var c=this,d={mediaType:this.mediaTypes.VIDEO,params:c.parseParameters(b),id:c.parseUrl(a)};return d.id?d:void 0},h.prototype.createUrl=function(a,b,d){return a+b.id+c({params:d})},h.prototype.createShortUrl=function(a){return this.createUrl("https://dai.ly/",a,{})},h.prototype.createLongUrl=function(a,b){return this.createUrl("https://dailymotion.com/video/",a,b)},h.prototype.createEmbedUrl=function(a,b){return this.createUrl("//www.dailymotion.com/embed/video/",a,b)},n.bind(new h),i.prototype.parseUrl=function(a){var b=a.match(/^.+\/(.+)?\/videos\/(\d+)+|v=(\d+)|vb.\d+\/(\d+)/i);return{id:b?b[2]||b[3]||b[4]:void 0,user:b?b[1]:void 0}},i.prototype.parse=function(a,b){var c=this.parseUrl(a);if(!c.id)return void 0;var d={mediaType:this.mediaTypes.VIDEO,params:b,id:c.id,user:c.user};return d},i.prototype.createUrl=function(a,b,d){var e=a+b.id;return e+=c({params:d})},i.prototype.createShortUrl=function(a,b){return this.createUrl("https://fb.com/",a,b)},i.prototype.createLongUrl=function(a,b){var c="https://www.facebook.com/";return a.user&&(c+=a.user+"/"),c+="videos/",this.createUrl(c,a,b)},i.prototype.createEmbedUrl=function(a,b){return this.createUrl("//facebook.com/embed/",a,b)},i.prototype.createImageUrl=function(a){var b="https://graph.facebook.com/";return b+=a.id,b+="/picture"},n.bind(new i),j.prototype.seperateId=function(a){return{pre:a[0],id:a.substr(1)}},j.prototype.parseChannel=function(a,b){var c=b.channel||b.utm_content||a.channel;return delete b.utm_content,delete b.channel,c},j.prototype.parseUrl=function(a,b,c){var d;return d=a.match(/(clips\.)?twitch\.tv\/(?:(?:videos\/(\d+))|(\w+))?/i),d&&d[2]?b.id="v"+d[2]:c.video?(b.id=c.video,delete c.video):c.clip?(b.id=c.clip,b.isClip=!0,delete c.clip):d&&d[1]&&d[3]?(b.id=d[3],b.isClip=!0):d&&d[3]&&(b.channel=d[3]),b},j.prototype.parseMediaType=function(a){var b;return a.channel?b=this.mediaTypes.STREAM:a.id&&(a.isClip?(b=this.mediaTypes.CLIP,delete a.isClip):b=this.mediaTypes.VIDEO,delete a.channel),b},j.prototype.parseParameters=function(a){return a.t&&(a.start=d(a.t),delete a.t),a},j.prototype.parse=function(a,b){var c=this,d={};return d=c.parseUrl(a,d,b),d.channel=c.parseChannel(d,b),d.mediaType=c.parseMediaType(d),d.params=c.parseParameters(b),d.channel||d.id?d:void 0},j.prototype.createLongUrl=function(a,b){var d="";if(a.mediaType===this.mediaTypes.STREAM)d="https://twitch.tv/"+a.channel;else if(a.mediaType===this.mediaTypes.VIDEO){var e=this.seperateId(a.id);d="https://twitch.tv/videos/"+e.id,b.start&&(b.t=b.start+"s",delete b.start)}else a.mediaType===this.mediaTypes.CLIP&&(d="https://clips.twitch.tv/"+a.id);return d+=c({params:b})},j.prototype.createEmbedUrl=function(a,b){var d="https://player.twitch.tv/";return a.mediaType===this.mediaTypes.STREAM?b.channel=a.channel:a.mediaType===this.mediaTypes.VIDEO?(b.video=a.id,b.start&&(b.t=b.start+"s",delete b.start)):a.mediaType===this.mediaTypes.CLIP&&(d="https://clips.twitch.tv/embed",b.clip=a.id),d+=c({params:b})},n.bind(new j),k.prototype.parseUrl=function(a){var b=a.match(/(?:\/(?:channels\/[\w]+|(?:(?:album\/\d+|groups\/[\w]+)\/)?videos?))?\/(\d+)/i);return b?b[1]:void 0},k.prototype.parseParameters=function(a){return this.parseTime(a)},k.prototype.parseTime=function(a){return a.t&&(a.start=d(a.t),delete a.t),a},k.prototype.parse=function(a,b){var c={mediaType:this.mediaTypes.VIDEO,params:this.parseParameters(b),id:this.parseUrl(a)};return c.id?c:void 0},k.prototype.createUrl=function(a,b,d){var e=a+b.id,f=d.start;return delete d.start,e+=c({params:d}),f&&(e+="#t="+f),e},k.prototype.createLongUrl=function(a,b){return this.createUrl("https://vimeo.com/",a,b)},k.prototype.createEmbedUrl=function(a,b){return this.createUrl("//player.vimeo.com/video/",a,b)},n.bind(new k),l.prototype.parseUrl=function(a){var b=a.match(/(?:(?:v|vi|be|videos|embed)\/(?!videoseries)|(?:v|ci)=)([\w\-]{11})/i);return b?b[1]:void 0},l.prototype.parseParameters=function(a,b){return(a.start||a.t)&&(a.start=d(a.start||a.t),delete a.t),a.v===b.id&&delete a.v,a.list===b.id&&delete a.list,a},l.prototype.parseMediaType=function(a){if(a.params.list&&(a.list=a.params.list,delete a.params.list),a.id&&!a.params.ci)a.mediaType=this.mediaTypes.VIDEO;else if(a.list)delete a.id,a.mediaType=this.mediaTypes.PLAYLIST;else{if(!a.params.ci)return void 0;delete a.params.ci,a.mediaType=this.mediaTypes.SHARE}return a},l.prototype.parse=function(a,b){var c=this,d={params:b,id:c.parseUrl(a)};return d.params=c.parseParameters(b,d),d=c.parseMediaType(d)},l.prototype.createShortUrl=function(a,b){var c="https://youtu.be/"+a.id;return b.start&&(c+="#t="+b.start),c},l.prototype.createLongUrl=function(a,b){var d="",e=b.start;return delete b.start,a.mediaType===this.mediaTypes.PLAYLIST?(b.feature="share",d+="https://youtube.com/playlist"):a.mediaType===this.mediaTypes.VIDEO?(b.v=a.id,d+="https://youtube.com/watch"):a.mediaType===this.mediaTypes.SHARE&&(b.ci=a.id,d+="https://www.youtube.com/shared"),a.list&&(b.list=a.list),d+=c({params:b}),a.mediaType!==this.mediaTypes.PLAYLIST&&e&&(d+="#t="+e),d},l.prototype.createEmbedUrl=function(a,b){var d="//youtube.com/embed";return a.mediaType===this.mediaTypes.PLAYLIST?b.listType="playlist":(d+="/"+a.id,"1"===b.loop&&(b.playlist=a.id)),a.list&&(b.list=a.list),d+=c({params:b})},l.prototype.createImageUrl=function(a,b,c){var d=a+b.id+"/",e=c.imageQuality||this.defaultImageQuality;return d+e+".jpg"},l.prototype.createShortImageUrl=function(a,b){return this.createImageUrl("https://i.ytimg.com/vi/",a,b)},l.prototype.createLongImageUrl=function(a,b){return this.createImageUrl("https://img.youtube.com/vi/",a,b)},n.bind(new l),m.prototype.parseUrl=function(a){var b=a.match(/(?:(?:embed|sid)\/|v_show\/id_|VideoIDS=)([a-zA-Z0-9]+)/);return b?b[1]:void 0},m.prototype.parseParameters=function(a){return a.VideoIDS&&delete a.VideoIDS,a},m.prototype.parse=function(a,b){var c=this,d={mediaType:this.mediaTypes.VIDEO,id:c.parseUrl(a),params:c.parseParameters(b)};return d.id?d:void 0},m.prototype.createUrl=function(a,b,d){var e=a+b.id;return e+=c({params:d})},m.prototype.createEmbedUrl=function(a,b){return this.createUrl("http://player.youku.com/embed/",a,b)},m.prototype.createLongUrl=function(a,b){return this.createUrl("http://v.youku.com/v_show/id_",a,b)},m.prototype.createStaticUrl=function(a,b){return this.createUrl("http://static.youku.com/v1.0.0638/v/swf/loader.swf?VideoIDS=",a,b)},m.prototype.createFlashUrl=function(a,b){var d="http://player.youku.com/player.php/sid/"+a.id+"/v.swf";return d+=c({params:b})},n.bind(new m),"undefined"!=typeof window&&(window.urlParser=n),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=n)}();